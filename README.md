# Smart Library API

## 1. Название и назначение сервиса

**Название:** Smart Library API
**Назначение:** REST API микросервис для управления каталогом книг в библиотечной системе.

**Основные функции:**
- Управление книгами (создание, чтение, обновление, удаление)
- Поиск и фильтрация книг по различным критериям
- Пагинация для работы с большими объемами данных
- Проверка доступности книг
- Мониторинг здоровья сервиса

## 2. Архитектура и зависимости

### Технологии и фреймворки:
- **FastAPI** (0.104.1) - веб-фреймворк для построения API
- **SQLite** - легковесная база данных
- **Pydantic** (2.5.0) - валидация данных
- **Uvicorn** - ASGI сервер для запуска
- **Pytest** - тестирование

### Взаимодействие с другими микросервисами:
Сервис работает автономно, но может быть интегрирован с:
- Системой управления пользователями
- Сервисом бронирования книг
- Системой учета выдачи

### Используемые внешние сервисы:
Не используются внешние сервисы (S3, Redis, Kafka) - самодостаточный сервис.

## 3. Способы запуска сервиса

### Способ 1: Локальный запуск (рекомендуется для разработки)

```bash
# Клонируйте репозиторий
git clone https://github.com/Appleuha/smart-library-api.git
cd smart-library-api

# Создайте виртуальное окружение
python -m venv venv

# Активируйте виртуальное окружение
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# Установите зависимости
pip install -r requirements.txt

# Запустите сервис
python -m app.main
```


### Способ 2: Запуск через Docker
```bash
# Сборка Docker образа
docker build -t smart-library-api .

# Запуск контейнера
docker run -p 8000:8000 smart-library-api

# Или с сохранением данных:
docker run -p 8000:8000 -v $(pwd)/data:/app/data smart-library-api
```

### Переменные окружения (.env)
Создайте файл .env в корне проекта:
PORT=8000
LOG_LEVEL=INFO
DATABASE_FILE=library.db

### 4. API документация
OpenAPI/Swagger документация:
После запуска сервиса доступна по адресу: http://localhost:8000/docs

Основные эндпоинты:
Книги:
* GET /api/v1/books/ - Получить список книг (с пагинацией и фильтрацией)
* GET /api/v1/books/{id} - Получить книгу по ID
* POST /api/v1/books/ - Создать новую книгу
* PUT /api/v1/books/{id} - Полностью обновить книгу
* PATCH /api/v1/books/{id} - Частично обновить книгу
* DELETE /api/v1/books/{id} - Удалить книгу

Системные:
* GET / - Информация о сервисе
* GET /health - Проверка здоровья сервиса и базы данных

Параметры запросов для GET /api/v1/books/:
* skip - количество пропускаемых записей (по умолчанию: 0)
* limit - количество записей на странице (1-1000, по умолчанию: 100)
* author - фильтр по автору (частичное совпадение)
* title - фильтр по названию (частичное совпадение)
* search - поиск по названию ИЛИ автору
* year - фильтр по году публикации
* available_only - только доступные книги (true/false)

### 5. Как тестировать
Команды для запуска тестов:
```bash
# Все тесты
python -m pytest tests/ -v

# Тесты с покрытием
python -m pytest tests/ --cov=app

# Конкретный тестовый файл
python -m pytest tests/test_books_crud.py
```

Git Hooks для автоматического тестирования:
Проект настроен с Git hooks для автоматических проверок:
* При git commit - проверка форматирования и линтинга
* При git push - дополнительный запуск всех тестов

### 6. Контакты и поддержка
Авторы: Appleuha (Подстрельнова Алёна, группа ПИН-41Д)
Поддержка: Создавайте Issues в репозитории проекта

## Лицензия
License - подробности в файле LICENSE
